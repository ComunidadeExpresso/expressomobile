function Rope(e,t){Mesh.call(this,e),this.points=t,this.vertices=new Float32Array(t.length*4),this.uvs=new Float32Array(t.length*4),this.colors=new Float32Array(t.length*2),this.indices=new Uint16Array(t.length*2),this._ready=!0,this.refresh()}var Mesh=require("./Mesh"),core=require("../core");Rope.prototype=Object.create(Mesh.prototype),Rope.prototype.constructor=Rope,module.exports=Rope,Rope.prototype.refresh=function(){var e=this.points;if(e.length<1||!this._texture._uvs)return;var t=this.uvs,n=this.indices,r=this.colors,i=this._texture._uvs,s=new core.Point(i.x0,i.y0),o=new core.Point(i.x2-i.x0,i.y2-i.y0);t[0]=0+s.x,t[1]=0+s.y,t[2]=0+s.x,t[3]=1*o.y+s.y,r[0]=1,r[1]=1,n[0]=0,n[1]=1;var u=e.length,a,f,l;for(var c=1;c<u;c++)a=e[c],f=c*4,l=c/(u-1),t[f]=l*o.x+s.x,t[f+1]=0+s.y,t[f+2]=l*o.x+s.x,t[f+3]=1*o.y+s.y,f=c*2,r[f]=1,r[f+1]=1,f=c*2,n[f]=f,n[f+1]=f+1;this.dirty=!0},Rope.prototype._onTextureUpdate=function(){Mesh.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},Rope.prototype.updateTransform=function(){var e=this.points;if(e.length<1)return;var t=e[0],n,r=0,i=0,s=this.vertices,o=e.length,u,a,f,l,c;for(var h=0;h<o;h++)u=e[h],a=h*4,h<e.length-1?n=e[h+1]:n=u,i=-(n.x-t.x),r=n.y-t.y,f=(1-h/(o-1))*10,f>1&&(f=1),l=Math.sqrt(r*r+i*i),c=this._texture.height/2,r/=l,i/=l,r*=c,i*=c,s[a]=u.x+r,s[a+1]=u.y+i,s[a+2]=u.x-r,s[a+3]=u.y-i,t=u;this.containerUpdateTransform()};