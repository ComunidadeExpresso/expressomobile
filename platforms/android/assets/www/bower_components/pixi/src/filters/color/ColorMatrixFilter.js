function ColorMatrixFilter(){core.AbstractFilter.call(this,null,fs.readFileSync(__dirname+"/colorMatrix.frag","utf8"),{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var core=require("../../core"),fs=require("fs");ColorMatrixFilter.prototype=Object.create(core.AbstractFilter.prototype),ColorMatrixFilter.prototype.constructor=ColorMatrixFilter,module.exports=ColorMatrixFilter,ColorMatrixFilter.prototype._loadMatrix=function(e,t){t=!!t;var n=e;t&&(this._multiply(n,this.uniforms.m.value,e),n=this._colorMatrix(n)),this.uniforms.m.value=n},ColorMatrixFilter.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19],e},ColorMatrixFilter.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},ColorMatrixFilter.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},ColorMatrixFilter.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale,ColorMatrixFilter.prototype.blackAndWhite=function(e){var t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=.213,s=.715,o=.072,u=[i+n*(1-i)+r*-i,s+n*-s+r*-s,o+n*-o+r*(1-o),0,0,i+n*-i+r*.143,s+n*(1-s)+r*.14,o+n*-o+r*-0.283,0,0,i+n*-i+r*-(1-i),s+n*-s+r*s,o+n*(1-o)+r*o,0,0,0,0,0,1,0];this._loadMatrix(u,t)},ColorMatrixFilter.prototype.contrast=function(e,t){var n=(e||0)+1,r=-128*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},ColorMatrixFilter.prototype.saturate=function(e,t){var n=(e||0)*2/3+1,r=(n-1)*-0.5,i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},ColorMatrixFilter.prototype.desaturate=function(e){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(e){var t=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.sepia=function(e){var t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.technicolor=function(e){var t=[1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.polaroid=function(e){var t=[1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.toBGR=function(e){var t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.kodachrome=function(e){var t=[1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.browni=function(e){var t=[.5997023498159715,.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-0.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.vintage=function(e){var t=[.6279345635605994,.3202183420819367,-0.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-0.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.colorTone=function(e,t,n,r,i){e=e||.2,t=t||.15,n=n||16770432,r=r||3375104;var s=(n>>16&255)/255,o=(n>>8&255)/255,u=(n&255)/255,a=(r>>16&255)/255,f=(r>>8&255)/255,l=(r&255)/255,c=[.3,.59,.11,0,0,s,o,u,e,0,a,f,l,t,0,s-a,o-f,u-l,0,0];this._loadMatrix(c,i)},ColorMatrixFilter.prototype.night=function(e,t){e=e||.1;var n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)},ColorMatrixFilter.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},ColorMatrixFilter.prototype.lsd=function(e){var t=[2,-0.4,.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperties(ColorMatrixFilter.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(e){this.uniforms.m.value=e}}});