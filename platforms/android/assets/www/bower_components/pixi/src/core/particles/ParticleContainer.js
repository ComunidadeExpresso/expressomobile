function ParticleContainer(e,t,n){Container.call(this),n=n||15e3,e=e||15e3;var r=16384;n>r&&(n=r),n>e&&(n=e),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=CONST.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(t)}var Container=require("../display/Container"),CONST=require("../const");ParticleContainer.prototype=Object.create(Container.prototype),ParticleContainer.prototype.constructor=ParticleContainer,module.exports=ParticleContainer,ParticleContainer.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e?!!e.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},ParticleContainer.prototype.renderWebGL=function(e){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable)return;e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this)},ParticleContainer.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},ParticleContainer.prototype.renderCanvas=function(e){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable)return;var t=e.context,n=this.worldTransform,r=!0,i=0,s=0,o=0,u=0;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var a=0;a<this.children.length;++a){var f=this.children[a];if(!f.visible)continue;var l=f.texture.frame;t.globalAlpha=this.worldAlpha*f.alpha;if(f.rotation%(Math.PI*2)===0)r&&(t.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),r=!1),i=f.anchor.x*-l.width*f.scale.x+f.position.x+.5,s=f.anchor.y*-l.height*f.scale.y+f.position.y+.5,o=l.width*f.scale.x,u=l.height*f.scale.y;else{r||(r=!0),f.displayObjectUpdateTransform();var c=f.worldTransform;e.roundPixels?t.setTransform(c.a,c.b,c.c,c.d,c.tx|0,c.ty|0):t.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),i=f.anchor.x*-l.width+.5,s=f.anchor.y*-l.height+.5,o=l.width,u=l.height}t.drawImage(f.texture.baseTexture.source,l.x,l.y,l.width,l.height,i,s,o,u)}},ParticleContainer.prototype.destroy=function(){Container.prototype.destroy.apply(this,arguments);if(this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null};