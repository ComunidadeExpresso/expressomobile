function Container(){DisplayObject.call(this),this.children=[]}var math=require("../math"),DisplayObject=require("./DisplayObject"),RenderTexture=require("../textures/RenderTexture"),_tempMatrix=new math.Matrix;Container.prototype=Object.create(DisplayObject.prototype),Container.prototype.constructor=Container,module.exports=Container,Object.defineProperties(Container.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}}}),Container.prototype.onChildrenChange=function(){},Container.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},Container.prototype.addChildAt=function(e,t){if(e===this)return e;if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.onChildrenChange(t),e.emit("added",this),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},Container.prototype.swapChildren=function(e,t){if(e===t)return;var n=this.getChildIndex(e),r=this.getChildIndex(t);if(n<0||r<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)},Container.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Container.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(e);this.children.splice(n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},Container.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[e]},Container.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(t===-1)return;return this.removeChildAt(t)},Container.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,this.children.splice(e,1),this.onChildrenChange(e),t.emit("removed",this),t},Container.prototype.removeChildren=function(e,t){var n=e||0,r=typeof t=="number"?t:this.children.length,i=r-n,s,o;if(i>0&&i<=r){s=this.children.splice(n,i);for(o=0;o<s.length;++o)s[o].parent=null;this.onChildrenChange(e);for(o=0;o<s.length;++o)s[o].emit("removed",this);return s}if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.generateTexture=function(e,t,n){var r=this.getLocalBounds(),i=new RenderTexture(e,r.width|0,r.height|0,n,t);return _tempMatrix.tx=-r.x,_tempMatrix.ty=-r.y,i.render(this,_tempMatrix),i},Container.prototype.updateTransform=function(){if(!this.visible)return;this.displayObjectUpdateTransform();for(var e=0,t=this.children.length;e<t;++e)this.children[e].updateTransform()},Container.prototype.containerUpdateTransform=Container.prototype.updateTransform,Container.prototype.getBounds=function(){if(!this._currentBounds){if(this.children.length===0)return math.Rectangle.EMPTY;var e=Infinity,t=Infinity,n=-Infinity,r=-Infinity,i,s,o,u=!1;for(var a=0,f=this.children.length;a<f;++a){var l=this.children[a];if(!l.visible)continue;u=!0,i=this.children[a].getBounds(),e=e<i.x?e:i.x,t=t<i.y?t:i.y,s=i.width+i.x,o=i.height+i.y,n=n>s?n:s,r=r>o?r:o}if(!u)return math.Rectangle.EMPTY;var c=this._bounds;c.x=e,c.y=t,c.width=n-e,c.height=r-t,this._currentBounds=c}return this._currentBounds},Container.prototype.containerGetBounds=Container.prototype.getBounds,Container.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=math.Matrix.IDENTITY;for(var t=0,n=this.children.length;t<n;++t)this.children[t].updateTransform();return this.worldTransform=e,this._currentBounds=null,this.getBounds(math.Matrix.IDENTITY)},Container.prototype.renderWebGL=function(e){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;var t,n;if(this._mask||this._filters){e.currentRenderer.flush(),this._filters&&this._filters.length&&e.filterManager.pushFilter(this,this._filters),this._mask&&e.maskManager.pushMask(this,this._mask),e.currentRenderer.start(),this._renderWebGL(e);for(t=0,n=this.children.length;t<n;t++)this.children[t].renderWebGL(e);e.currentRenderer.flush(),this._mask&&e.maskManager.popMask(this,this._mask),this._filters&&e.filterManager.popFilter(),e.currentRenderer.start()}else{this._renderWebGL(e);for(t=0,n=this.children.length;t<n;++t)this.children[t].renderWebGL(e)}},Container.prototype._renderWebGL=function(e){},Container.prototype._renderCanvas=function(e){},Container.prototype.renderCanvas=function(e){if(!this.visible||this.alpha<=0||!this.renderable)return;this._mask&&e.maskManager.pushMask(this._mask,e),this._renderCanvas(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)},Container.prototype.destroy=function(e){DisplayObject.prototype.destroy.call(this);if(e)for(var t=0,n=this.children.length;t<n;++t)this.children[t].destroy(e);this.removeChildren(),this.children=null};