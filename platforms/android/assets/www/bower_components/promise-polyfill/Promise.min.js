function m(e){function t(e){if("object"!=typeof this||"function"!=typeof e)throw new TypeError;this.c=this.a=null,this.b=[],o(e,r.bind(this),i.bind(this))}function n(t){var n=this;null===this.a?this.b.push(t):e(function(){var e=n.a?t.d:t.e;if("function"!=typeof e)(n.a?t.resolve:t.reject)(n.c);else{var r;try{r=e(n.c)}catch(i){t.reject(i);return}t.resolve(r)}})}function r(e){try{if(e===this)throw new TypeError;if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t){o(t.bind(e),r.bind(this),i.bind(this));return}}this.a=!0,this.c=e,s.call(this)}catch(n){i.call(this,n)}}function i(e){this.a=!1,this.c=e,s.call(this)}function s(){for(var e=0,t=this.b.length;e<t;e++)n.call(this,this.b[e]);this.b=null}function o(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(i){r||(r=!0,n(i))}}return t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,r){var i=this;return new t(function(t,s){n.call(i,{d:e,e:r,resolve:t,reject:s})})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t}"undefined"!=typeof module&&(module.f=m);