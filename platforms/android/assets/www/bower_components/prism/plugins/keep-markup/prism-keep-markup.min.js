!function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.hooks.add("before-highlight",function(e){var t=!1,n=0,r=[],i=function(e,s){var u={};s||(u.clone=e.cloneNode(!1),u.posOpen=n,r.push(u));for(var a=0,f=e.childNodes.length;f>a;a++){var l=e.childNodes[a];1===l.nodeType?i(l):3===l.nodeType&&(t||(l.data=l.data.replace(/^(?:\r?\n|\r)/,""),t=!0),n+=l.data.length)}s||(u.posClose=n)};i(e.element,!0),r&&r.length&&(e.keepMarkup=r)}),Prism.hooks.add("after-highlight",function(e){if(e.keepMarkup&&e.keepMarkup.length){var t=function(e,r){for(var i=0,s=e.childNodes.length;s>i;i++){var o=e.childNodes[i];if(1===o.nodeType){if(!t(o,r))return!1}else 3===o.nodeType&&(!r.nodeStart&&r.pos+o.data.length>r.node.posOpen&&(r.nodeStart=o,r.nodeStartPos=r.node.posOpen-r.pos),r.nodeStart&&r.pos+o.data.length>=r.node.posClose&&(r.nodeEnd=o,r.nodeEndPos=r.node.posClose-r.pos),r.pos+=o.data.length);if(r.nodeStart&&r.nodeEnd){var u=document.createRange();return u.setStart(r.nodeStart,r.nodeStartPos),u.setEnd(r.nodeEnd,r.nodeEndPos),r.node.clone.appendChild(u.extractContents()),u.insertNode(r.node.clone),u.detach(),!1}}return!0};e.keepMarkup.forEach(function(r){t(e.element,{node:r,pos:0})})}}))}();