var fs=require("fs"),vm=require("vm"),components=require("./components"),languagesCatalog=components.languages;module.exports={createInstance:function(e){var t={loadedLanguages:[],Prism:this.createEmptyPrism()};return t=this.loadLanguages(e,t),t.Prism},loadLanguages:function(e,t){typeof e=="string"&&(e=[e]);var n=this;return e.forEach(function(e){t=n.loadLanguage(e,t)}),t},loadLanguage:function(e,t){if(!languagesCatalog[e])throw new Error("Language '"+e+"' not found.");if(-1<t.loadedLanguages.indexOf(e))return t;languagesCatalog[e].require&&(t=this.loadLanguages(languagesCatalog[e].require,t));var n=this.loadFileSource(e);return t.Prism=this.runFileWithContext(n,{Prism:t.Prism}).Prism,t.loadedLanguages.push(e),t},createEmptyPrism:function(){var e=this.loadFileSource("core"),t=this.runFileWithContext(e);return t.Prism},fileSourceCache:{},loadFileSource:function(e){return this.fileSourceCache[e]=this.fileSourceCache[e]||fs.readFileSync(__dirname+"/../../components/prism-"+e+".js","utf8")},runFileWithContext:function(e,t){return t=t||{},vm.runInNewContext(e,t),t}};