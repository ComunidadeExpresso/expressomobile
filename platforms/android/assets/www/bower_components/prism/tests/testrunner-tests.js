var assert=require("chai").assert,TokenStreamTransformer=require("./helper/token-stream-transformer"),TestCase=require("./helper/test-case");describe("The token stream transformer",function(){it("should handle all kinds of simple transformations",function(){var e=[{type:"type",content:"content"},"string"],t=[["type","content"],"string"];assert.deepEqual(TokenStreamTransformer.simplify(e),t)}),it("should handle nested structures",function(){var e=[{type:"type",content:[{type:"insideType",content:[{type:"insideInsideType",content:"content"}]}]}],t=[["type",[["insideType",[["insideInsideType","content"]]]]]];assert.deepEqual(TokenStreamTransformer.simplify(e),t)}),it("should strip empty tokens",function(){var e=["","\r\n","	"," "],t=[];assert.deepEqual(TokenStreamTransformer.simplify(e),t)}),it("should strip empty token tree branches",function(){var e=[{type:"type",content:[["",""],"",{type:"nested",content:[""]}]},[[[[[[[""]]]]]]]],t=[["type",[["nested",[]]]]];assert.deepEqual(TokenStreamTransformer.simplify(e),t)}),it("should ignore all properties in tokens except value and content",function(){var e=[{type:"type",content:"content",alias:"alias"}],t=[["type","content"]];assert.deepEqual(TokenStreamTransformer.simplify(e),t)})}),describe("The language name parsing",function(){it("should use the last language as the main language if no language is specified",function(){assert.deepEqual(TestCase.parseLanguageNames("a"),{languages:["a"],mainLanguage:"a"}),assert.deepEqual(TestCase.parseLanguageNames("a+b+c"),{languages:["a","b","c"],mainLanguage:"c"})}),it("should use the specified language as main language",function(){assert.deepEqual(TestCase.parseLanguageNames("a+b!+c"),{languages:["a","b","c"],mainLanguage:"b"})}),it("should throw an error if there are multiple main languages",function(){assert.throw(function(){TestCase.parseLanguageNames("a+b!+c!")},"There are multiple main languages defined.")})});