/*! jQuery UI - v1.11.4 - 2015-03-13
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position","./menu"],e):e(jQuery)})(function(e){return e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var n,r,i,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,u="input"===s;this.isMultiLine=o?!0:u?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||u?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return n=!0,i=!0,r=!0,void 0;n=!1,i=!1,r=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:n=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:n=!0,this._move("nextPage",s);break;case o.UP:n=!0,this._keyEvent("previous",s);break;case o.DOWN:n=!0,this._keyEvent("next",s);break;case o.ENTER:this.menu.active&&(n=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:r=!0,this._searchTimeout(s)}},keypress:function(i){if(n)return n=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault(),void 0;if(!r){var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:this._move("previousPage",i);break;case s.PAGE_DOWN:this._move("nextPage",i);break;case s.UP:this._keyEvent("previous",i);break;case s.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(n){n.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var r=this.menu.element[0];e(n.target).closest(".ui-menu-item").length||this._delay(function(){var n=this;this.document.one("mousedown",function(i){i.target===n.element[0]||i.target===r||e.contains(r,i.target)||n.close()})})},menufocus:function(n,r){var i,s;return this.isNewMenu&&(this.isNewMenu=!1,n.originalEvent&&/^mouse/.test(n.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(n.target).trigger(n.originalEvent)}),void 0):(s=r.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",n,{item:s})&&n.originalEvent&&/^key/.test(n.originalEvent.type)&&this._value(s.value),i=r.item.attr("aria-label")||s.value,i&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var n=this.options.appendTo;return n&&(n=n.jquery||n.nodeType?e(n):this.document.find(n).eq(0)),n&&n[0]||(n=this.element.closest(".ui-front")),n.length||(n=this.document[0].body),n},_initSource:function(){var n,r,i=this;e.isArray(this.options.source)?(n=this.options.source,this.source=function(r,i){i(e.ui.autocomplete.filter(n,r.term))}):"string"==typeof this.options.source?(r=this.options.source,this.source=function(n,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:r,data:n,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var n=this.term===this._value(),r=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!n||n&&!r&&!i)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var n=++this.requestIndex;return e.proxy(function(e){n===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(n){return n.length&&n[0].label&&n[0].value?n:e.map(n,function(n){return"string"==typeof n?{label:n,value:n}:e.extend({},n,{label:n.label||n.value,value:n.value||n.label})})},_suggest:function(n){var r=this.menu.element.empty();this._renderMenu(r,n),this.isNewMenu=!0,this.menu.refresh(),r.show(),this._resizeMenu(),r.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,r){var i=this;e.each(r,function(e,t){i._renderItemData(n,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(n,r){return e("<li>").text(r.label).appendTo(n)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(n,r){var i=RegExp(e.ui.autocomplete.escapeRegex(r),"i");return e.grep(n,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(n){var r;this._superApply(arguments),this.options.disabled||this.cancelSearch||(r=n&&n.length?this.options.messages.results(n.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(r).appendTo(this.liveRegion))}}),e.ui.autocomplete});