function zen(e,t){var n=emmet.expandAbbreviation(e);if(t!==undefined)for(var r in t){var i=t[r];for(var s=i.length;s>=0;s--)n=n.replace(new RegExp(r+(s+1),"g"),i[s])}return n}function $zen(){return $(zen.apply(this,arguments))}var _=function(){function C(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=a.call(e);if(r!=a.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&C(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(S.has(e,u)){s++;if(!(o=S.has(t,u)&&C(e[u],t[u],n)))break}if(o){for(u in t)if(S.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new P(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.3";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(S.has(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=S.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=S.toArray(e).reverse();return r&&!i&&(t=S.bind(t,r)),i?S.reduce(s,t,n,r):S.reduce(s,t)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var T=S.some=S.any=function(e,t,r){t||(t=S.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(n=T(e,function(e){return e===t}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.shuffle=function(e){var t=[],n;return x(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},S.sortBy=function(e,t,n){var r=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={},r=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):e.toArray&&S.isFunction(e.toArray)?e.toArray():S.values(e):[]},S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},S.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,t){return S.reduce(e,function(e,n){return S.isArray(n)?e.concat(t?n:S.flatten(n)):(e[e.length]=n,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e,i=[];return e.length<3&&(t=!0),S.reduce(r,function(n,r,s){if(t?S.last(n)!==r||!n.length:!S.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=S.flatten(o.call(arguments,1),!0);return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var N=function(){};S.bind=function(t,n){var r,i;if(t.bind===E&&E)return E.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){N.prototype=t.prototype;var e=new N,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t){var n,r,i,s,o,u,a=S.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},S.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={};return x(S.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return C(e,t,[])},S.isEmpty=function(e){if(e==null)return!0;if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)=="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return a.call(e)=="[object Arguments]"},S.isArguments(arguments)||(S.isArguments=function(e){return!!e&&!!S.has(e,"callee")}),S.isFunction=function(e){return a.call(e)=="[object Function]"},S.isString=function(e){return a.call(e)=="[object String]"},S.isNumber=function(e){return a.call(e)=="[object Number]"},S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},S.isDate=function(e){return a.call(e)=="[object Date]"},S.isRegExp=function(e){return a.call(e)=="[object RegExp]"},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.has=function(e,t){return f.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.result=function(e,t){if(e==null)return null;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){x(S.functions(e),function(t){B(t,S[t]=e[t])})};var k=0;S.uniqueId=function(e){var t=k++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var O in A)A[A[O]]=O;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,_=/\\(\\|'|r|n|t|u2028|u2029)/g,D=function(e){return e.replace(_,function(e,t){return A[t]})};S.template=function(e,t,n){n=S.defaults(n||{},S.templateSettings);var r="__p+='"+e.replace(M,function(e){return"\\"+A[e]}).replace(n.escape||L,function(e,t){return"'+\n_.escape("+D(t)+")+\n'"}).replace(n.interpolate||L,function(e,t){return"'+\n("+D(t)+")+\n'"}).replace(n.evaluate||L,function(e,t){return"';\n"+D(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,S);var s=function(e){return i.call(this,e,S)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},S.chain=function(e){return S(e).chain()};var P=function(e){this._wrapped=e};S.prototype=P.prototype;var H=function(e,t){return t?S(e).chain():e},B=function(e,t){P.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),H(t.apply(S,e),this._chain)}};return S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];P.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],H(n,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];P.prototype[e]=function(){return H(t.apply(this._wrapped,arguments),this._chain)}}),P.prototype.chain=function(){return this._chain=!0,this},P.prototype.value=function(){return this._wrapped},S}.call({}),emmet=function(e){function o(e,t,n){var r;return t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){e.apply(this,arguments)},_.extend(r,e),s.prototype=e.prototype,r.prototype=new s,t&&_.extend(r.prototype,t),n&&_.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r}function a(e){return!(e in i)&&u&&u(e),i[e]}var t="html",n="plain";if(typeof _=="undefined")try{_=e[["require"][0]]("underscore")}catch(r){}if(typeof _=="undefined")throw"Cannot access to Underscore.js lib";var i={_:_},s=function(){},u=null;return{define:function(e,t){e in i||(i[e]=_.isFunction(t)?this.exec(t):t)},require:a,exec:function(t,n){return t.call(n||e,_.bind(a,this),_,this)},extend:function(e,t){var n=o(this,e,t);return n.extend=this.extend,e.hasOwnProperty("toString")&&(n.prototype.toString=e.toString),n},expandAbbreviation:function(e,n,r,i){if(!e)return"";n=n||t;var s=a("filters"),o=a("abbreviationParser");r=a("profile").get(r,n),a("tabStops").resetTabstopIndex();var u=s.extractFromAbbreviation(e),f=o.parse(u[0],{syntax:n,contextNode:i}),l=s.composeList(n,r,u[1]);return s.apply(f,l,r),f.toString()},defaultSyntax:function(){return t},defaultProfile:function(){return n},log:function(){e.console&&e.console.log&&e.console.log.apply(e.console,arguments)},setModuleLoader:function(e){u=e}}}(this);typeof exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(exports=module.exports=emmet),exports.emmet=emmet),typeof define!="undefined"&&define(emmet),emmet.define("abbreviationParser",function(e,t){function f(e){this.parent=null,this.children=[],this._attributes=[],this.abbreviation="",this.counter=1,this._name=null,this._text="",this.repeatCount=1,this.hasImplicitRepeat=!1,this._data={},this.start="",this.end="",this.content="",this.padding=""}function l(e){return e.substring(1,e.length-1)}function c(e,t){var n;while(n=e.next()){if(n===t)return!0;if(n=="\\")continue}return!1}function h(n){n=e("utils").trim(n);var r=new f,s=r.addChild(),o,u=e("stringStream").create(n),a=1e3,c;while(!u.eol()&&--a>0){o=u.peek();switch(o){case"(":u.start=u.pos;if(!u.skipToPair("(",")"))throw'Invalid abbreviation: mo matching ")" found for character at '+u.pos;var p=h(l(u.current()));(c=u.match(/^\*(\d+)?/,!0))&&s._setRepeat(c[1]),t.each(p.children,function(e){s.addChild(e)});break;case">":s=s.addChild(),u.next();break;case"+":s=s.parent.addChild(),u.next();break;case"^":var d=s.parent||s;s=(d.parent||d).addChild(),u.next();break;default:u.start=u.pos,u.eatWhile(function(e){if(e=="["||e=="{"){if(u.skipToPair(e,i[e]))return u.backUp(1),!0;throw'Invalid abbreviation: mo matching "'+i[e]+'" found for character at '+u.pos}if(e=="+"){u.next();var t=u.eol()||~"+>^*".indexOf(u.peek());return u.backUp(1),t}return e!="("&&b(e)}),s.setAbbreviation(u.current()),u.start=u.pos}}if(a<1)throw"Endless loop detected";return r}function p(t,n){t=e("utils").trim(t);var i=[],s=e("stringStream").create(t);s.eatSpace();while(!s.eol()){s.start=s.pos;if(!s.eatWhile(r))break;var o=s.current(),u="";if(s.peek()=="="){s.next(),s.start=s.pos;var a=s.peek();if(a=='"'||a=="'"){s.next();if(!c(s,a))throw"Invalid attribute value";u=s.current(),u=u.substring(1,u.length-1)}else{if(!s.eatWhile(/[^\s\]]/))throw"Invalid attribute value";u=s.current()}}i.push({name:o,value:u}),s.eatSpace()}return i}function d(t){var n=[],i={"#":"id",".":"class"},s=null,o=e("stringStream").create(t);while(!o.eol())switch(o.peek()){case"#":case".":s===null&&(s=o.pos);var u=i[o.peek()];o.next(),o.start=o.pos,o.eatWhile(r),n.push({name:u,value:o.current()});break;case"[":s===null&&(s=o.pos),o.start=o.pos;if(!o.skipToPair("[","]"))throw"Invalid attribute set definition";n=n.concat(p(l(o.current())));break;default:o.next()}return n.length?{element:t.substring(0,s),attributes:v(n)}:null}function v(e){e=t.map(e,function(e){return t.clone(e)});var n={};return t.filter(e,function(e){if(e.name in n){var t=n[e.name];return e.name.toLowerCase()=="class"?t.value+=(t.value.length?" ":"")+e.value:t.value=e.value,!1}return n[e.name]=e})}function m(t){if(!~t.indexOf("{"))return null;var n=e("stringStream").create(t);while(!n.eol())switch(n.peek()){case"[":case"(":n.skipToPair(n.peek(),i[n.peek()]);break;case"{":return n.start=n.pos,n.skipToPair("{","}"),{element:t.substring(0,n.start),text:l(n.current())};default:n.next()}}function g(e){for(var n=e.children.length-1,r,i,s;n>=0;n--){i=e.children[n];if(i.isRepeating()){s=r=i.repeatCount,i.repeatCount=1,i.updateProperty("counter",1),i.updateProperty("maxCount",s);while(--r>0)i.parent.addChild(i.clone(),n+1).updateProperty("counter",r+1).updateProperty("maxCount",s)}}return t.each(e.children,g),e}function y(e){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];r.isGroup()?r.replace(y(r).children):r.isEmpty()&&r.remove()}return t.each(e.children,y),e}function b(e){var t=e.charCodeAt(0),n="#.*:$-_!@|%";return t>64&&t<91||t>96&&t<123||t>47&&t<58||n.indexOf(e)!=-1}var n=/^[\w\-\$\:@\!%]+\+?$/i,r=/[\w\-:\$@]/,i={"[":"]","(":")","{":"}"},s=Array.prototype.splice,o=[],u=[],a=[];return f.prototype={addChild:function(e,n){return e=e||new f,e.parent=this,t.isUndefined(n)?this.children.push(e):this.children.splice(n,0,e),e},clone:function(){var e=new f,n=["abbreviation","counter","_name","_text","repeatCount","hasImplicitRepeat","start","end","content","padding"];return t.each(n,function(t){e[t]=this[t]},this),e._attributes=t.map(this._attributes,function(e){return t.clone(e)}),e._data=t.clone(this._data),e.children=t.map(this.children,function(t){return t=t.clone(),t.parent=e,t}),e},remove:function(){return this.parent&&(this.parent.children=t.without(this.parent.children,this)),this},replace:function(){var e=this.parent,n=t.indexOf(e.children,this),r=t.flatten(arguments);s.apply(e.children,[n,1].concat(r)),t.each(r,function(t){t.parent=e})},updateProperty:function(e,n){return this[e]=n,t.each(this.children,function(t){t.updateProperty(e,n)}),this},find:function(e){return this.findAll(e)[0]},findAll:function(e){if(!t.isFunction(e)){var n=e.toLowerCase();e=function(e){return e.name().toLowerCase()==n}}var r=[];return t.each(this.children,function(t){e(t)&&r.push(t),r=r.concat(t.findAll(e))}),t.compact(r)},data:function(t,n){return arguments.length==2&&(this._data[t]=n,t=="resource"&&e("elements").is(n,"snippet")&&(this.content=n.data,this._text&&(this.content=e("abbreviationUtils").insertChildContent(n.data,this._text)))),this._data[t]},name:function(){var t=this.matchedResource();return e("elements").is(t,"element")?t.name:this._name},attributeList:function(){var n=[],r=this.matchedResource();return e("elements").is(r,"element")&&t.isArray(r.attributes)&&(n=n.concat(r.attributes)),v(n.concat(this._attributes))},attribute:function(e,n){if(arguments.length==2){var r=t.indexOf(t.pluck(this._attributes,"name"),e.toLowerCase());~r?this._attributes[r].value=n:this._attributes.push({name:e,value:n})}return(t.find(this.attributeList(),function(t){return t.name==e})||{}).value},matchedResource:function(){return this.data("resource")},index:function(){return this.parent?t.indexOf(this.parent.children,this):-1},_setRepeat:function(e){e?this.repeatCount=parseInt(e,10)||1:this.hasImplicitRepeat=!0},setAbbreviation:function(e){e=e||"";var t=this;e=e.replace(/\*(\d+)?$/,function(e,n){return t._setRepeat(n),""}),this.abbreviation=e;var r=m(e);r&&(e=r.element,this.content=this._text=r.text);var i=d(e);i&&(e=i.element,this._attributes=i.attributes),this._name=e;if(this._name&&!n.test(this._name))throw"Invalid abbreviation"},toString:function(){var n=e("utils"),r=this.start,i=this.end,s=this.content,o=this;t.each(a,function(e){r=e(r,o,"start"),s=e(s,o,"content"),i=e(i,o,"end")});var u=t.map(this.children,function(e){return e.toString()}).join("");return s=e("abbreviationUtils").insertChildContent(s,u,{keepVariable:!1}),r+n.padString(s,this.padding)+i},hasEmptyChildren:function(){return!!t.find(this.children,function(e){return e.isEmpty()})},hasImplicitName:function(){return!this._name&&!this.isTextNode()},isGroup:function(){return!this.abbreviation},isEmpty:function(){return!this.abbreviation&&!this.children.length},isRepeating:function(){return this.repeatCount>1||this.hasImplicitRepeat},isTextNode:function(){return!this.name()&&!this.attributeList().length},isElement:function(){return!this.isEmpty()&&!this.isTextNode()},deepestChild:function(){if(!this.children.length)return null;var e=this;while(e.children.length)e=t.last(e.children);return e}},a.push(function(t,n){return e("utils").replaceCounter(t,n.counter,n.maxCount)}),{parse:function(e,n){n=n||{};var r=h(e);if(n.contextNode){r._name=n.contextNode.name;var i={};t.each(r._attributes,function(e){i[e.name]=e}),t.each(n.contextNode.attributes,function(e){e.name in i?i[e.name].value=e.value:(e=t.clone(e),r._attributes.push(e),i[e.name]=e)})}return t.each(o,function(e){e(r,n)}),r=y(g(r)),t.each(u,function(e){e(r,n)}),r},AbbreviationNode:f,addPreprocessor:function(e){t.include(o,e)||o.push(e)},removeFilter:function(e){preprocessor=t.without(o,e)},addPostprocessor:function(e){t.include(u,e)||u.push(e)},removePostprocessor:function(e){u=t.without(u,e)},addOutputProcessor:function(e){t.include(a,e)||a.push(e)},removeOutputProcessor:function(e){a=t.without(a,e)},isAllowedChar:function(e){return e=String(e),b(e)||~">+^[](){}".indexOf(e)}}}),emmet.define("utils",function(e,t){function r(e){this._data=[],this.length=0,e&&this.append(e)}var n="${0}";return r.prototype={append:function(e){this._data.push(e),this.length+=e.length},toString:function(){return this._data.join("")},valueOf:function(){return this.toString()}},{reTag:/<\/?[\w:\-]+(?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*\s*(\/?)>$/,endsWithTag:function(e){return this.reTag.test(e)},isNumeric:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),e&&e>47&&e<58},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},getNewline:function(){var n=e("resources");if(!n)return"\n";var r=n.getVariable("newline");return t.isString(r)?r:"\n"},setNewline:function(t){var n=e("resources");n.setVariable("newline",t),n.setVariable("nl",t)},splitByLines:function(e,n){var r=this.getNewline(),i=(e||"").replace(/\r\n/g,"\n").replace(/\n\r/g,"\n").replace(/\r/g,"\n").replace(/\n/g,r).split(r);return n&&(i=t.filter(i,function(e){return e.length&&!!this.trim(e)},this)),i},normalizeNewline:function(e){return this.splitByLines(e).join(this.getNewline())},repeatString:function(e,t){var n=[];for(var r=0;r<t;r++)n.push(e);return n.join("")},getStringsPads:function(e){var n=t.map(e,function(e){return t.isString(e)?e.length:+e}),r=t.max(n);return t.map(n,function(e){var t=r-e;return t?this.repeatString(" ",t):""},this)},padString:function(n,r){var i=t.isNumber(r)?this.repeatString(e("resources").getVariable("indentation")||"	",r):r,s=[],o=this.splitByLines(n),u=this.getNewline();s.push(o[0]);for(var a=1;a<o.length;a++)s.push(u+i+o[a]);return s.join("")},zeroPadString:function(e,t){var n="",r=e.length;while(t>r++)n+="0";return n+e},unindentString:function(e,t){var n=this.splitByLines(e);for(var r=0;r<n.length;r++)n[r].search(t)==0&&(n[r]=n[r].substr(t.length));return n.join(this.getNewline())},replaceUnescapedSymbol:function(e,n,r){var i=0,s=e.length,o=n.length,u=0;while(i<s)if(e.charAt(i)=="\\")i+=o+1;else if(e.substr(i,o)==n){var a=o;u++;var f=r;if(t.isFunction(r)){var l=r(e,n,i,u);l?(a=l[0].length,f=l[1]):f=!1}if(f===!1){i++;continue}e=e.substring(0,i)+f+e.substring(i+a),s=e.length,i+=f.length}else i++;return e},replaceVariables:function(n,r){r=r||{};var i=t.isFunction(r)?r:function(e,t){return t in r?r[t]:null},s=e("resources");return e("tabStops").processText(n,{variable:function(e){var n=i(e.token,e.name,e);n===null&&(n=s.getVariable(e.name));if(n===null||t.isUndefined(n))n=e.token;return n}})},replaceCounter:function(e,n,r){var i="$";e=String(e),n=String(n),/^\-?\d+$/.test(n)&&(n=+n);var s=this;return this.replaceUnescapedSymbol(e,i,function(e,i,o,u){if(e.charAt(o+1)=="{"||s.isNumeric(e.charAt(o+1)))return!1;var a=o+1;while(e.charAt(a)=="$"&&e.charAt(a+1)!="{")a++;var l=a-o,c=0,p=!1,d;if(d=e.substr(a).match(/^@(\-?)(\d*)/))a+=d[0].length,d[1]&&(p=!0),c=parseInt(d[2]||1)-1;return p&&r&&t.isNumber(n)&&(n=r-n+1),n+=c,[e.substring(o,a),s.zeroPadString(n+"",l)]})},matchesTag:function(e){return this.reTag.test(e||"")},escapeText:function(e){return e.replace(/([\$\\])/g,"\\$1")},unescapeText:function(e){return e.replace(/\\(.)/g,"$1")},getCaretPlaceholder:function(){return t.isFunction(n)?n.apply(this,arguments):n},setCaretPlaceholder:function(e){n=e},getLinePadding:function(e){return(e.match(/^(\s+)/)||[""])[0]},getLinePaddingFromPosition:function(e,t){var n=this.findNewlineBounds(e,t);return this.getLinePadding(n.substring(e))},escapeForRegexp:function(e){var t=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return e.replace(t,"\\$&")},prettifyNumber:function(e,t){return e.toFixed(typeof t=="undefined"?2:t).replace(/\.?0+$/,"")},stringBuilder:function(e){return new r(e)},replaceSubstring:function(e,n,r,i){return t.isObject(r)&&"end"in r&&(i=r.end,r=r.start),t.isString(i)&&(i=r+i.length),t.isUndefined(i)&&(i=r),r<0||r>e.length?e:e.substring(0,r)+n+e.substring(i)},narrowToNonSpace:function(t,n,r){var i=e("range").create(n,r),s=/[\s\n\r\u00a0]/;while(i.start<i.end){if(!s.test(t.charAt(i.start)))break;i.start++}while(i.end>i.start){i.end--;if(!s.test(t.charAt(i.end))){i.end++;break}}return i},findNewlineBounds:function(t,n){var r=t.length,i=0,s=r-1;for(var o=n-1;o>0;o--){var u=t.charAt(o);if(u=="\n"||u=="\r"){i=o+1;break}}for(var a=n;a<r;a++){var u=t.charAt(a);if(u=="\n"||u=="\r"){s=a;break}}return e("range").create(i,s-i)},deepMerge:function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length;!t.isObject(u)&&!t.isFunction(u)&&(u={});for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;i&&(t.isObject(i)||(s=t.isArray(i)))?(s?(s=!1,o=r&&t.isArray(r)?r:[]):o=r&&t.isObject(r)?r:{},u[n]=this.deepMerge(o,i)):i!==undefined&&(u[n]=i)}return u}}}),emmet.define("handlerList",function(e,t){function n(){this._list=[]}return n.prototype={add:function(e,n){this._list.push(t.extend({order:0},n||{},{fn:e}))},remove:function(e){this._list=t.without(this._list,t.find(this._list,function(t){return t.fn===e}))},list:function(){return t.sortBy(this._list,"order").reverse()},listFn:function(){return t.pluck(this.list(),"fn")},exec:function(e,n){n=n||[];var r=null;return t.find(this.list(),function(t){r=t.fn.apply(t,n);if(r!==e)return!0}),r}},{create:function(){return new n}}}),emmet.define("stringStream",function(e,t){function n(e){this.pos=this.start=0,this.string=e}return n.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos),n;typeof e=="string"?n=t==e:n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},skipToPair:function(e,t){var n=0,r,i=this.pos,s=this.string.length;while(i<s){r=this.string.charAt(i++);if(r==e)n++;else if(r==t){n--;if(n<1)return this.pos=i,!0}}return!1},backUp:function(e){this.pos-=e},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&t!==!1&&(this.pos+=i[0].length),i}var r=n?function(e){return e.toLowerCase()}:function(e){return e};if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},{create:function(e){return new n(e)}}}),emmet.define("resources",function(e,t){function f(t){var n=e("utils");return n.replaceUnescapedSymbol(t,"|",n.getCaretPlaceholder())}function l(t,n,r){n=f(n);if(r=="snippets")return e("elements").create("snippet",n);if(r=="abbreviations")return c(t,n)}function c(t,n){t=e("utils").trim(t);var r=e("elements"),i;return(i=s.exec(n))?r.create("element",i[1],i[2],i[4]=="/"):r.create("reference",n)}function h(e){return e.replace(/:$/,"").replace(/:/g,"-")}var n="system",r="user",i={},s=/^<(\w+\:?[\w\-]*)((?:\s+[\w\:\-]+\s*=\s*(['"]).*?\3)*)\s*(\/?)>/,o={},u={},a=e("handlerList").create();return{setVocabulary:function(e,t){i={},t==n?o=e:u=e},getVocabulary:function(e){return e==n?o:u},getMatchedResource:function(e,n){return a.exec(null,t.toArray(arguments))||this.findSnippet(n,e.name())},getVariable:function(e){return(this.getSection("variables")||{})[e]},setVariable:function(e,t){var n=this.getVocabulary("user")||{};"variables"in n||(n.variables={}),n.variables[e]=t,this.setVocabulary(n,"user")},hasSyntax:function(e){return e in this.getVocabulary(r)||e in this.getVocabulary(n)},addResolver:function(e,t){a.add(e,t)},removeResolver:function(e){a.remove(e)},getSection:function(n){if(!n)return null;n in i||(i[n]=e("utils").deepMerge({},o[n],u[n]));var r=i[n],s=t.rest(arguments),a;while(r&&(a=s.shift())){if(!(a in r))return null;r=r[a]}return r},findItem:function(e,t){var n=this.getSection(e);while(n){if(t in n)return n[t];n=this.getSection(n["extends"])}},findSnippet:function(e,n,r){if(!e||!n)return null;r=r||[];var i=[n];~n.indexOf("-")&&i.push(n.replace(/\-/g,":"));var s=this.getSection(e),o=null;return t.find(["snippets","abbreviations"],function(n){var r=this.getSection(e,n);if(r)return t.find(i,function(e){if(r[e])return o=l(e,r[e],n)})},this),r.push(e),!o&&s["extends"]&&!t.include(r,s["extends"])?this.findSnippet(s["extends"],n,r):o},fuzzyFindSnippet:function(n,r,i){i=i||.3;var s=this.getAllSnippets(n),o=e("string-score");r=h(r);var u=t.map(s,function(e,t){return{key:t,score:o.score(e.nk,r,.1)}}),a=t.last(t.sortBy(u,"score"));if(a&&a.score>=i){var f=a.key;return s[f].parsedValue}},getAllSnippets:function(e){var n="all-"+e;if(!i[n]){var r=[],s=e,o=[];do{var u=this.getSection(s);if(!u)break;t.each(["snippets","abbreviations"],function(e){var n={};t.each(u[e]||null,function(t,r){n[r]={nk:h(r),value:t,parsedValue:l(r,t,e),type:e}}),r.push(n)}),o.push(s),s=u["extends"]}while(s&&!t.include(o,s));i[n]=t.extend.apply(t,r.reverse())}return i[n]}}}),emmet.define("profile",function(e,t){function i(e){t.extend(this,r,e)}function s(e,t){switch(String(t||"").toLowerCase()){case"lower":return e.toLowerCase();case"upper":return e.toUpperCase()}return e}function o(e,t){return n[e.toLowerCase()]=new i(t)}function u(){o("xhtml"),o("html",{self_closing_tag:!1}),o("xml",{self_closing_tag:!0,tag_nl:!0}),o("plain",{tag_nl:!1,indent:!1,place_cursor:!1}),o("line",{tag_nl:!1,indent:!1,extraFilters:"s"})}var n={},r={tag_case:"asis",attr_case:"asis",attr_quotes:"double",tag_nl:"decide",tag_nl_leaf:!1,place_cursor:!0,indent:!0,inline_break:3,self_closing_tag:"xhtml",filters:"",extraFilters:""};return i.prototype={tagName:function(e){return s(e,this.tag_case)},attributeName:function(e){return s(e,this.attr_case)},attributeQuote:function(){return this.attr_quotes=="single"?"'":'"'},selfClosing:function(e){return this.self_closing_tag=="xhtml"?" /":this.self_closing_tag===!0?"/":""},cursor:function(){return this.place_cursor?e("utils").getCaretPlaceholder():""}},u(),{create:function(e,n){return arguments.length==2?o(e,n):new i(t.defaults(e||{},r))},get:function(r,s){if(!r&&s){var o=e("resources").findItem(s,"profile");o&&(r=o)}return r?r instanceof i?r:t.isString(r)&&r.toLowerCase()in n?n[r.toLowerCase()]:this.create(r):n.plain},remove:function(e){e=(e||"").toLowerCase(),e in n&&delete n[e]},reset:function(){n={},u()},stringCase:s}}),emmet.define("abbreviationUtils",function(e,t){return{isSnippet:function(t){return e("elements").is(t.matchedResource(),"snippet")},isUnary:function(e){if(e.children.length||e._text||this.isSnippet(e))return!1;var t=e.matchedResource();return t&&t.is_empty},isInline:function(t){return t.isTextNode()||!t.name()||e("tagName").isInlineLevel(t.name())},isBlock:function(e){return this.isSnippet(e)||!this.isInline(e)},isSnippet:function(t){return e("elements").is(t.matchedResource(),"snippet")},hasTagsInContent:function(t){return e("utils").matchesTag(t.content)},hasBlockChildren:function(e){return this.hasTagsInContent(e)&&this.isBlock(e)||t.any(e.children,function(e){return this.isBlock(e)},this)},insertChildContent:function(n,r,i){i=t.extend({keepVariable:!0,appendIfNoChild:!0},i||{});var s=!1,o=e("utils");return n=o.replaceVariables(n,function(e,t,u){var a=e;return t=="child"&&(a=o.padString(r,o.getLinePaddingFromPosition(n,u.start)),s=!0,i.keepVariable&&(a+=e)),a}),!s&&i.appendIfNoChild&&(n+=r),n}}}),emmet.define("htmlMatcher",function(e,t){function i(t,n){return{name:n[1],selfClose:!!n[3],range:e("range").create(t,n[0]),type:"open"}}function s(t,n){return{name:n[1],range:e("range").create(t,n[0]),type:"close"}}function o(n,r){return{range:e("range").create(n,t.isNumber(r)?r-n:r[0]),type:"comment"}}function u(e){var t={},o;return{open:function(e){var t=this.matches(e);return t&&t.type=="open"?t:null},close:function(e){var t=this.matches(e);return t&&t.type=="close"?t:null},matches:function(u){var a="p"+u;if(!(a in t)&&e.charAt(u)=="<"){var f=e.slice(u);(o=f.match(n))?t[a]=i(u,o):(o=f.match(r))?t[a]=s(u,o):t[a]=!1}return t[a]},text:function(){return e}}}function a(e,t,n){return e.substring(t,t+n.length)==n}function f(e,n){var r=[],i=null,s=n.text();for(var o=e.range.end,u=s.length;o<u;o++){if(a(s,o,"<!--"))for(var f=o;f<u;f++)if(a(s,f,"-->")){o=f+3;break}if(i=n.matches(o))if(i.type=="open"&&!i.selfClose)r.push(i.name);else if(i.type=="close"){if(!r.length)return i.name==e.name?i:null;if(t.last(r)==i.name)r.pop();else{var l=!1;while(r.length&&!l){var c=r.pop();c==i.name&&(l=!0)}if(!r.length&&!l)return i.name==e.name?i:null}}}}var n=/^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([\w\:\-]+)[^>]*>/;return{find:function(t,n){var r=e("range"),i=u(t),s=null,l=null;for(var h=n;h>=0;h--)if(s=i.open(h)){if(s.selfClose){if(s.range.cmp(n,"lt","gt"))break;continue}l=f(s,i);if(l){var p=r.create2(s.range.start,l.range.end);if(p.contains(n))break}else if(s.range.contains(n))break;s=null}else if(a(t,h,"-->"))for(var v=h-1;v>=0;v--){if(a(t,v,"-->"))break;if(a(t,v,"<!--")){h=v;break}}else if(a(t,h,"<!--")){var v=h+4,m=t.length;for(;v<m;v++)if(a(t,v,"-->")){v+=3;break}s=o(h,v);break}if(s){var g=null,y=null;l?(g=r.create2(s.range.start,l.range.end),y=r.create2(s.range.end,l.range.start)):g=y=r.create2(s.range.start,s.range.end);if(s.type=="comment"){var b=g.substring(t);y.start+=b.length-b.replace(/^<\!--\s*/,"").length,y.end-=b.length-b.replace(/\s*-->$/,"").length}return{open:s,close:l,type:s.type=="comment"?"comment":"tag",innerRange:y,innerContent:function(){return this.innerRange.substring(t)},outerRange:g,outerContent:function(){return this.outerRange.substring(t)},range:!y.length()||!y.cmp(n,"lte","gte")?g:y,content:function(){return this.range.substring(t)},source:t}}},tag:function(e,t){var n=this.find(e,t);if(n&&n.type=="tag")return n}}}),emmet.define("tabStops",function(e,t){var n=100,r=0,i={replaceCarets:!1,escape:function(e){return"\\"+e},tabstop:function(e){return e.token},variable:function(e){return e.token}};return e("abbreviationParser").addOutputProcessor(function(t,n,i){var s=0,o=e("tabStops"),u=e("utils"),a={tabstop:function(e){var t=parseInt(e.group);if(t==0)return"${0}";t>s&&(s=t);if(e.placeholder){var n=t+r,i=o.processText(e.placeholder,a);return"${"+n+":"+i+"}"}return"${"+(t+r)+"}"}};return t=o.processText(t,a),t=u.replaceVariables(t,o.variablesResolver(n)),r+=s+1,t}),{extract:function(n,r){var s=e("utils"),o={carets:""},u=[];r=t.extend({},i,r,{tabstop:function(e){var t=e.token,n="";return e.placeholder=="cursor"?u.push({start:e.start,end:e.start+t.length,group:"carets",value:""}):("placeholder"in e&&(o[e.group]=e.placeholder),e.group in o&&(n=o[e.group]),u.push({start:e.start,end:e.start+t.length,group:e.group,value:n})),t}}),r.replaceCarets&&(n=n.replace(new RegExp(s.escapeForRegexp(s.getCaretPlaceholder()),"g"),"${0:cursor}")),n=this.processText(n,r);var f=s.stringBuilder(),l=0,h=t.map(u,function(e){f.append(n.substring(l,e.start));var t=f.length,r=o[e.group]||"";return f.append(r),l=e.end,{group:e.group,start:t,end:t+r.length}});return f.append(n.substring(l)),{text:f.toString(),tabstops:t.sortBy(h,"start")}},processText:function(n,r){r=t.extend({},i,r);var s=e("utils").stringBuilder(),o=e("stringStream").create(n),u,f,l;while(u=o.next()){if(u=="\\"&&!o.eol()){s.append(r.escape(o.next()));continue}l=u;if(u=="$"){o.start=o.pos-1;if(f=o.match(/^[0-9]+/))l=r.tabstop({start:s.length,group:o.current().substr(1),token:o.current()});else if(f=o.match(/^\{([a-z_\-][\w\-]*)\}/))l=r.variable({start:s.length,name:f[1],token:o.current()});else if(f=o.match(/^\{([0-9]+)(:.+?)?\}/,!1)){o.skipToPair("{","}");var h={start:s.length,group:f[1],token:o.current()},p=h.token.substring(h.group.length+2,h.token.length-1);p&&(h.placeholder=p.substr(1)),l=r.tabstop(h)}}s.append(l)}return s.toString()},upgrade:function(e,n){var r=0,i={tabstop:function(e){var t=parseInt(e.group);return t>r&&(r=t),e.placeholder?"${"+(t+n)+":"+e.placeholder+"}":"${"+(t+n)+"}"}};return t.each(["start","end","content"],function(t){e[t]=this.processText(e[t],i)},this),r},variablesResolver:function(r){var i={},s=e("resources");return function(o,u){if(u=="child")return o;if(u=="cursor")return e("utils").getCaretPlaceholder();var a=r.attribute(u);if(!t.isUndefined(a)&&a!==o)return a;var l=s.getVariable(u);return l?l:(i[u]||(i[u]=n++),"${"+i[u]+":"+u+"}")}},resetTabstopIndex:function(){r=0,n=100}}}),emmet.define("preferences",function(e,t){function o(e){return t.isString(e)?(e=e.toLowerCase(),e=="yes"||e=="true"||e=="1"):!!e}function u(e){return t.isObject(e)&&"value"in e&&t.keys(e).length<3}var n={},r={},i=null,s=null;return{define:function(e,n,i){var s=e;t.isString(e)&&(s={},s[e]={value:n,description:i}),t.each(s,function(e,t){r[t]=u(e)?e:{value:e}})},set:function(e,i){var s=e;t.isString(e)&&(s={},s[e]=i),t.each(s,function(e,t){if(!(t in r))throw'Property "'+t+'" is not defined. You should define it first with `define` method of current module';if(e!==r[t].value){switch(typeof r[t].value){case"boolean":e=o(e);break;case"number":e=parseInt(e+"",10)||0;break;default:e+=""}n[t]=e}else t in n&&delete n[t]})},get:function(e){return e in n?n[e]:e in r?r[e].value:void 0},getArray:function(n){var r=this.get(n);return t.isUndefined(r)||(r=t.map(r.split(","),e("utils").trim),r.length||(r=null)),r},getDict:function(e){var n={};return t.each(this.getArray(e),function(e){var t=e.split(":");n[t[0]]=t[1]}),n},description:function(e){return e in r?r[e].description:void 0},remove:function(e){t.isArray(e)||(e=[e]),t.each(e,function(e){e in n&&delete n[e],e in r&&delete r[e]})},list:function(){return t.map(t.keys(r).sort(),function(e){return{name:e,value:this.get(e),type:typeof r[e].value,description:r[e].description}},this)},load:function(e){t.each(e,function(e,t){this.set(t,e)},this)},exportModified:function(){return t.clone(n)},reset:function(){n={}},_startTest:function(){i=r,s=n,r={},n={}},_stopTest:function(){r=i,n=s}}}),emmet.define("elements",function(e,t){function s(e){return{data:e}}var n={},r=/([\w\-]+)\s*=\s*(['"])(.*?)\2/g,i={add:function(e,t){var r=this;n[e]=function(){var n=t.apply(r,arguments);return n&&(n.type=e),n}},get:function(e){return n[e]},create:function(e){var t=[].slice.call(arguments,1),n=this.get(e);return n?n.apply(this,t):null},is:function(e,t){return e&&e.type===t}};return i.add("element",function(e,n,i){var s={name:e,is_empty:!!i};if(n){s.attributes=[];if(t.isArray(n))s.attributes=n;else if(t.isString(n)){var o;while(o=r.exec(n))s.attributes.push({name:o[1],value:o[3]})}else t.each(n,function(e,t){s.attributes.push({name:t,value:e})})}return s}),i.add("snippet",s),i.add("reference",s),i.add("empty",function(){return{}}),i}),emmet.define("filters",function(e,t){function i(e){return e?t.isString(e)?e.split(/[\|,]/g):e:[]}var n={},r="html";return{add:function(e,t){n[e]=t},apply:function(r,s,o){var u=e("utils");return o=e("profile").get(o),t.each(i(s),function(e){var t=u.trim(e.toLowerCase());t&&t in n&&(r=n[t](r,o))}),r},composeList:function(t,n,s){n=e("profile").get(n);var o=i(n.filters||e("resources").findItem(t,"filters")||r);n.extraFilters&&(o=o.concat(i(n.extraFilters))),s&&(o=o.concat(i(s)));if(!o||!o.length)o=i(r);return o},extractFromAbbreviation:function(e){var t="";return e=e.replace(/\|([\w\|\-]+)$/,function(e,n){return t=n,""}),[e,i(t)]}}}),emmet.exec(function(e,t){function i(n){return t.include(r.getArray("format.noIndentTags")||[],n.name())?"":e("resources").getVariable("indentation")}function s(t){return t.parent&&e("abbreviationUtils").hasBlockChildren(t.parent)}function o(e){return e.parent&&!e.parent.parent&&!e.index()}function u(t,n){var r=e("abbreviationUtils");return n.tag_nl===!0||r.isBlock(t)?!0:!t.parent||!n.inline_break?!1:f(t.parent,n)}function a(e,t){return e.children.length&&u(e.children[0],t)}function f(n,r){var i=0,s=e("abbreviationUtils");return!!t.find(n.children,function(e){e.isTextNode()||!s.isInline(e)?i=0:s.isInline(e)&&i++;if(i>=r.inline_break)return!0})}function l(e){return!e.parent}function c(t,n,r){return t.start=t.end="",!o(t)&&n.tag_nl!==!1&&u(t,n)&&(l(t.parent)||!e("abbreviationUtils").isInline(t.parent))&&(t.start=e("utils").getNewline()+t.start),t}function h(n,r){var i=e("abbreviationUtils"),s=t.any(n.children,function(e){return i.isSnippet(e)?!1:!i.isInline(e)});return s?!0:f(n,r)}function p(f,l,c){f.start=f.end=n;var p=e("utils"),v=e("abbreviationUtils"),m=v.isUnary(f),g=p.getNewline(),y=i(f);if(l.tag_nl!==!1){var b=l.tag_nl===!0&&(l.tag_nl_leaf||f.children.length);b||(b=t.include(r.getArray("format.forceIndentationForTags")||[],f.name()));if(!f.isTextNode()){if(u(f,l)){!o(f)&&(!v.isSnippet(f.parent)||f.index())&&(f.start=g+f.start);if(v.hasBlockChildren(f)||a(f,l)||b&&!m)f.end=g+f.end;if(v.hasTagsInContent(f)||b&&!f.children.length&&!m)f.start+=g+y}else v.isInline(f)&&s(f)&&!o(f)?f.start=g+f.start:v.isInline(f)&&h(f,l)&&(f.end=g+f.end);f.padding=y}}return f}var n="%s",r=e("preferences");r.define("format.noIndentTags","html","A comma-separated list of tag names that should not get inner indentation."),r.define("format.forceIndentationForTags","body","A comma-separated list of tag names that should <em>always</em> get inner indentation."),e("filters").add("_format",function d(n,r,i){i=i||0;var s=e("abbreviationUtils");return t.each(n.children,function(e){s.isSnippet(e)?c(e,r,i):p(e,r,i),d(e,r,i+1)}),n})}),emmet.exec(function(e,t){function n(e,n){var r=n.attributeQuote(),i=n.cursor();return t.map(e.attributeList(),function(e){var t=n.attributeName(e.name);return" "+t+"="+r+(e.value||i)+r}).join("")}function r(t,r,i){if(!t.parent)return t;var s=e("abbreviationUtils"),o=e("utils"),u=n(t,r),a=r.cursor(),f=s.isUnary(t),l="",h="";if(!t.isTextNode()){var p=r.tagName(t.name());f?(l="<"+p+u+r.selfClosing()+">",t.end=""):(l="<"+p+u+">",h="</"+p+">")}var d="%s";return t.start=o.replaceSubstring(t.start,l,t.start.indexOf(d),d),t.end=o.replaceSubstring(t.end,h,t.end.indexOf(d),d),!t.children.length&&!f&&!~t.content.indexOf(a)&&!e("tabStops").extract(t.content).tabstops.length&&(t.start+=a),t}e("filters").add("html",function i(n,s,o){o=o||0;var u=e("abbreviationUtils");return o||(n=e("filters").apply(n,"_format",s)),t.each(n.children,function(e){u.isSnippet(e)||r(e,s,o),i(e,s,o+1)}),n})});