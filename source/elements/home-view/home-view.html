<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->


<!-- Iron elements -->
<link rel="import" href="../../bower_components/iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../../bower_components/iron-a11y-announcer/iron-a11y-announcer.html">
<link rel="import" href="../../bower_components/iron-overlay-behavior/iron-overlay-behavior.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">


<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles-classes.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tab.html"> 
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html"> 
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html"> 
<link rel="import" href="../../bower_components/paper-item/paper-icon-item.html"> 
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html"> 
<link rel="import" href="../../bower_components/dom-bind-notifier/dom-bind-notifier.html">
<link rel="import" href="../../bower_components/iron-signals/iron-signals.html">


<link rel="import" href="../../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-left-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/fade-in-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-up-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-down-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-left-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-right-animation.html">

<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../../bower_components/app-layout/app-scrollpos-control/app-scrollpos-control.html">


<link rel="import" href="../../bower_components/toast-er/toast-er.html">

<!-- <link rel="import" href="../app-page.html"> -->
<link rel="import" href="../mail-messages/mail-messages.html">
<link rel="import" href="../mail-create/mail-create.html">
<link rel="import" href="../calendar/events-list.html">
<link rel="import" href="../expresso-login/expresso-login.html">

<link rel="import" href="../contact-list/contact-list.html">
<link rel="import" href="../contact-card/contact-card.html">
<link rel="import" href="../contact-edit/contact-edit.html">

<link rel="import" href="../material-search/material-search.html">


<dom-module id="home-view">
  <style>
    :host {
      height: 100%;
    }
    app-drawer { 
      z-index: 1; 
    }
    app-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1;
      background-color: #4285f4;
      color: white;
      --app-header-background-front-layer: {
        background-color: #3f51b5;
      };
    }
    app-header paper-icon-button {
      --paper-icon-button-ink-color: white;
    }
    [title] {
      font-weight: 400;
      margin: 0 0 0 50px;
    }
    [condensed-title] {
      font-weight: 400;
      margin-left: 30px;
    }
    [condensed-title] i {
      font-style: normal;
      font-weight: 100;
    }
    app-toolbar.tall {
      height: 148px;
    }

    .content {
      @apply(--layout-flex);
      @apply(--layout-vertical);
      max-width: 1000px;
    }

    .inherit {
      color: inherit;
      background-color: inherit;
    }

    paper-spinner.blue {
      --paper-spinner-layer-1-color: var(--paper-light-blue-500);
      --paper-spinner-layer-2-color: var(--paper-light-blue-500);
      --paper-spinner-layer-3-color: var(--paper-light-blue-500);
      --paper-spinner-layer-4-color: var(--paper-light-blue-500);
    }

    #loadingArea {
      margin-top: 200px;
      margin-bottom: 10px;
      margin-left: 50%;
    }


    .refresh {
      background-color:#fff;
      border-radius:50%;

    }
    .refreshSpinner {
      padding:5px;
      width:22px;
      height:22px
    }
    .refreshStem {
      stroke-dasharray: 35;
      fill:rgba(0, 0, 0, 0);
      stroke-width:1
    }

    .scale {
      -webkit-animation:scaleAway .5s;
      -moz-animation:scaleAway .5s;
      -o-animation:scaleAway .5s;
      animation:scaleAway .5s
    }
    .refreshShadow {
      width:32px;
      height:32px;
      border-radius:50%;
      margin:0 auto;
      margin-bottom: -38px;
      border-color:#fff;
      border-style: solid;
      border-width: 3px;
      position: absolute;
      z-index: 100;
      margin-left: 50%;
      margin-top: 200px;
    }
    @-webkit-keyframes scaleAway {
      0% {transform:scale(1)}
      100% {transform:scale(0)}
    }
    @-moz-keyframes scaleAway {
      0% {transform:scale(1)}
      100% {transform:scale(0)}
    }
    @-o-keyframes scaleAway {
      0% {transform:scale(1)}
      100% {transform:scale(0)}
    }
    @keyframes scaleAway {
      0% {transform:scale(1)}
      100% {transform:scale(0)}
    }


    #appHeaderLayout {
      display: block;
      background-attachment: fixed;
      background-size: 100% 100%;
      background-repeat: no-repeat;
    }
/*    #appHeader {
      color: white;
      --app-header-background-rear-layer: {

      };
    }*/

  </style>
  <template>

  <iron-signals on-iron-signal-logout="_logoutUser"></iron-signals>

  <iron-signals on-iron-signal-page-title="_pageTitle"></iron-signals>
  <iron-signals on-iron-signal-back-button="_backButtonChange"></iron-signals>
  <iron-signals on-iron-signal-refresh-button="_refreshButtonChange"></iron-signals>
  <iron-signals on-iron-signal-page-loading="_isLoading"></iron-signals>
  <iron-signals on-iron-signal-update-background-image="_updateBackgroundImage"></iron-signals>
  
  <template is="dom-if" if="{{!isLogged}}"> 
    <expresso-login></expresso-login>
  </template>

    <material-search active="{{searchActive}}" search=""></material-search>

    <app-scrollpos-control selected="{{route}}"></app-scrollpos-control>

    <app-drawer-layout style="height:100%;">
      <app-drawer drawer-width="288px" responsive-width="1280px">
        <menu-tabs refresh-folders="{{refreshFolders}}"></menu-tabs>
      </app-drawer>

      <app-header-layout id="appHeaderLayout" has-scrolling-region>
        
        <app-header id="appHeader" condenses fixed effects="resize-title waterfall blend-background">
          <app-toolbar>
            <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
            <template is="dom-if" if="{{backButtonEnabled}}">
              <paper-icon-button icon="arrow-back" on-tap="backButtonClicked"></paper-icon-button>
            </template>
            <h4 condensed-title>{{pageTitle}}<i> &nbsp; {{pageSubTitle}}</i></h4>
            <template is="dom-if" if="{{refreshButtonEnabled}}">
              <paper-icon-button icon="refresh" on-tap="refreshButtonClicked"></paper-icon-button>
            </template>
            <a href="{{baseUrl}}search" class="inherit"><paper-icon-button icon="search"></paper-icon-button></a>
            <template is="dom-if" if="{{subMenuItems.length}}">
              <paper-menu-button horizontal-align="right" horizontal-offset="20" vertical-align="top" vertical-offset="60">
                <paper-icon-button icon="more-vert" class="dropdown-trigger"></paper-icon-button>
                <paper-menu class="dropdown-content">
                  <template is="dom-repeat" items="{{subMenuItems}}">
                    <paper-item><iron-icon icon="{{item.iconClass}}" item-icon></iron-icon>{{item.title}}</paper-item>
                  </template>
                </paper-menu>
              </paper-menu-button>
            </template>
            <!-- <paper-icon-button icon="more-vert"></paper-icon-button> -->
          </app-toolbar>
          <app-toolbar class="tall">
            <h1 title>{{pageTitle}}</h1>
          </app-toolbar>
        </app-header>

        <div id="mainPageContent" style="height:100%; padding-top: 0px;">

          <paper-material id='loadingArea' class="refreshShadow" elevation="2" style$="[[_computeShowLoadingNextPageStyle(isLoading)]]">
            <paper-spinner class="refresh refreshSpinner blue" active></paper-spinner>
          </paper-material>
          
          <neon-animated-pages style="height: 100%;" id="homePages" attr-for-selected="data-route" selected="{{route}}" entry-animation="fade-in-animation" exit-animation="fade-out-animation">

            <neon-animatable data-route="mail-messages">
              <mail-messages id="mailMessages" folder-id="{{currentFolderId}}"></mail-messages>
            </neon-animatable>

            <neon-animatable data-route="mail-create">
              <mail-create id="mailCreate" action="{{params.action}}" folder-id="{{params.folderid}}" msg-id="{{params.msgid}}" emails="{{params.emails}}"></mail-create>
              
            </neon-animatable>

            <neon-animatable data-route="mail-detail">
              <mail-detail id="mailDetail"></mail-detail>
            </neon-animatable>
<!-- 
            <neon-animatable data-route="mail-move">
              MOVER MENSAGEM.
            </neon-animatable> -->

            <neon-animatable data-route="contact-list"> 
               <contact-list id="contactList" signals="1"></contact-list>
            </neon-animatable>

            <neon-animatable data-route="contact-detail"> 
               <contact-card id="contactCard"></contact-card>
            </neon-animatable>

            <neon-animatable data-route="contact-edit"> 
              <contact-edit id="contactEdit" is-edition="true"></contact-edit>
            </neon-animatable>

            <neon-animatable data-route="events-list"> 
               <events-list id="eventsList"></events-list>
            </neon-animatable>

          </neon-animated-pages>


        </div>
        
      </app-header-layout>
    </app-drawer-layout>
    <menu-fab items="{{menuItems}}" is-loading="{{isLoading}}"></menu-fab>    

    <toast-er type="warning" heat="middle" style="z-index: 100000;"></toast-er>
  </template>
  <script>
  </script>
</dom-module>